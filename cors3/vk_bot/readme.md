# Курсовая работа

## Чек лист для запуска файла `main.py`

   :white_check_mark: **Установлены зависимости из** `requirements.txt`
___
   :white_check_mark: **Установлен токен Юзера в файл** `cfg/vk_api_auth.py`

   :white_check_mark: **Установлен токен сообщества ВК в файл** `cfg/vk_api_auth.py`

`Их можно установить вручную или через терминал - скрипт сам предложит это сделать, если данных не будет`
___

   :white_check_mark: **Установлено имя вашей базы данных в файл** `database_config.py`

   :white_check_mark: **Установлен юзер вашей базы данных** `database_config.py`

   :white_check_mark: **Установлен пароль вашей базы данных** `database_config.py`

`Их можно установить вручную или через терминал - скрипт сам предложит это сделать, если данных не будет`
___
:white_check_mark: В исполняемом фале `main.py` вставлен список с user_id пользователей ВК в переменную `example_vk_ids` для того, чтобы приложение могло функционировать и выдавать рекомендации

```Python
example_vk_ids = ['505187581', '464883336', '183381878', '299944791',
                 '844952901', '352286718', '186811160', '241937855', 
                 '146438077', '217777594', '246870728', '210796238']
for i in example_vk_ids:
    try:
        user = DataBase(vk_id=i)
        user.add_user()
    except ValueError:
        continue
```

**Бот будет учитывать:**

- Город
- Возраст в шагом в 5 лет
- Ваш пол

___

## Файл main.py

- Исполняемый файл создаст структуру базы данных, добавит в нее юзеров из переменной `example_vk_ids` вместе со всей необходимой информацией.
- Приложение будет выдавать пользователю подходящие рекомендации из тех пользователей, которых загрузили в список `example_vk_ids` или из тех, которые уже были пользователями до этого
- При каждом запуске  `main.py` удаляется старая база данных и создается новая, при необходимсоти это можно скорректировать, закоментировав строчку `DataBase.create_db()`.

   ```Python
    #DataBase.create_db() 
    example_vk_ids = ['505187581', '464883336', '183381878', '299944791',
                    '844952901', '352286718', '186811160', '241937855', 
                    '146438077', '217777594', '246870728', '210796238']
    for i in example_vk_ids:
        try:
            user = DataBase(vk_id=i)
            user.add_user()
        except ValueError:
            continue
   ```

## Пакет database

>В этом пакете есть полностью самостоятельный модуль `database_class`, он сам аккамулирует и отправлет данные в БД, так же сам получает их и хранит в атрибутах класса или любого экземлпяра, экземплярами в классе в абстрации являются юзеры приложения.

## Пакет cfg

>В этом пакете хранятся два модуля (`database_config.py`, `vk_api_auth.py`) с конфигурациями, если переменные в них не заполнены, то в терминале при запуске `main.py` появится возможность их заполнить, так же их можно заполнить в ручную непосрдественно в самих файлах.

```Python
from loguru import logger
DATABASE = ''
USER = ''
PASSWORD = ''
photo_dict_lecal = {
    'link_photo1': None,
    'link_photo2': None,
    'link_photo3': None
}
if DATABASE == '' or USER == '' or PASSWORD == '':
    logger.warning('Файл конфигурации "database_config" не заполнен!\nВыполните ручную аутентификацию...')
    DATABASE = input('Введите базу данных к которой хотите подключиться: ').strip()
    USER = input('Введите пользователя: ').strip()
    PASSWORD = input('Введите пароль: ').strip()
```

> :point_up_2: Необходимо прописать эти переменные - (`DATABASE`, `USER`, `PASSWORD`)

```Python
import vk_api
from loguru import logger
TOKEN_USER = ''
TOKEN_GROUP = ''
if TOKEN_USER == '' or TOKEN_GROUP == '':
    logger.warning('Файл "vk_api_auth" не заполнен!\nВыполните ручную аутентификацию...')
    TOKEN_USER = input('Введите токен юзера: ').strip()
    TOKEN_GROUP = input('Введите токен группы: ').strip()
VK_SESSION = vk_api.VkApi(token=TOKEN_USER)
VK_API = VK_SESSION.get_api()
param_dict_photo = {
    'owner_id': None,
    'album_id': 'wall',
    'extended': '1'
}
```

> :point_up_2: Необходимо прописать эти переменные - (`TOKEN_USER`,  `TOKEN_GROUP`) - токен одного любого юзера и токен группы соотвественно

## Пакет manager

>Этот пакет являетяся менеджером по подключению к api VK и хранит в себе два модуля с клавиатурой для пользователя и интераткивными сообщениями (`buttons.py`, `message.py`) и третий модуль(`manager_main.py`), который аккумулирует предыдыщие два и является менеджером исполняемого файла `main.py`, этот модуль сам подключается к api VK и исполняет все необходимые функции, подробная документация о которых внутри самих модулей.

## Логи
> Логи аккамулируются в папку log

## Запуск

> После прохождения чек листа по запуску, можно просто заупстить файл `main.py`

# Бот в вк
> Дождитесь пока `main.py` добавит всех тестовых юзеров в базу данных, когда логи остановятся, тогда бот готов к работе. Отправьте ему сообщение `start`, дальше весь функционал уже можете проверить пользуясь нативным(почти) юзабилити. Спасибо за внимание!
